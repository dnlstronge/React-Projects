{"ast":null,"code":"import _regeneratorRuntime from\"/home/dnlstronge/ReactP/moneyMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/dnlstronge/ReactP/moneyMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/dnlstronge/ReactP/moneyMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{projectAuth}from'../firebase/config';import{useAuthContext}from'./useAuthContext';export var useLogin=function useLogin(email,password){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCancelled=_useState2[0],setIsCancelled=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPending=_useState6[0],setIsPending=_useState6[1];var _useAuthContext=useAuthContext(),dispatch=_useAuthContext.dispatch;var login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setError(null);setIsPending(true);// this will sign user in:\n_context.prev=2;_context.next=5;return projectAuth.signInWithEmailAndPassword(email,password);case 5:res=_context.sent;setIsPending(false);dispatch({type:'LOGIN',payload:res.user});// update state:\nif(!isCancelled){setIsPending(false);setError(null);}_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);if(!isCancelled){console.log(_context.t0.message);setError(_context.t0.message);setIsPending(false);}case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function login(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){return function(){return setIsCancelled(true);};},[]);return{login:login,error:error,isPending:isPending};};","map":{"version":3,"names":["useState","useEffect","projectAuth","useAuthContext","useLogin","email","password","isCancelled","setIsCancelled","error","setError","isPending","setIsPending","dispatch","login","signInWithEmailAndPassword","res","type","payload","user","console","log","message"],"sources":["/home/dnlstronge/ReactP/moneyMan/src/hooks/useLogin.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { projectAuth } from '../firebase/config'\nimport { useAuthContext } from './useAuthContext'\n\n\nexport const useLogin = (email, password) => {\n    const [isCancelled, setIsCancelled] = useState(false)\n    const [error, setError] = useState(null)\n    const [isPending, setIsPending] = useState(false)\n    const { dispatch } = useAuthContext()\n\n    const login = async(email, password) => {\n        setError(null)   \n        setIsPending(true)\n        \n        // this will sign user in:\n        try {\n            const res = await projectAuth.signInWithEmailAndPassword(email, password)\n            setIsPending(false)\n            dispatch({ type: 'LOGIN', payload: res.user })\n\n// update state:\n\n        if (!isCancelled) {\n            setIsPending(false)\n            setError(null)\n            }\n        }\n    \n        catch(err) {\n            if (!isCancelled) {\n            console.log(err.message)\n            setError(err.message)\n            setIsPending(false)\n            }}\n    }\n    useEffect(() => {\n        return() => setIsCancelled(true)\n    }, [])\n\n\n    return { login, error, isPending } \n}"],"mappings":"kcAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,WAAW,KAAQ,oBAAoB,CAChD,OAASC,cAAc,KAAQ,kBAAkB,CAGjD,MAAO,IAAMC,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,KAAK,CAAEC,QAAQ,CAAK,CACzC,cAAsCN,QAAQ,CAAC,KAAK,CAAC,wCAA9CO,WAAW,eAAEC,cAAc,eAClC,eAA0BR,QAAQ,CAAC,IAAI,CAAC,yCAAjCS,KAAK,eAAEC,QAAQ,eACtB,eAAkCV,QAAQ,CAAC,KAAK,CAAC,yCAA1CW,SAAS,eAAEC,YAAY,eAC9B,oBAAqBT,cAAc,EAAE,CAA7BU,QAAQ,iBAARA,QAAQ,CAEhB,GAAMC,MAAK,0FAAG,iBAAMT,KAAK,CAAEC,QAAQ,0HAC/BI,QAAQ,CAAC,IAAI,CAAC,CACdE,YAAY,CAAC,IAAI,CAAC,CAElB;AAAA,sCAEsBV,YAAW,CAACa,0BAA0B,CAACV,KAAK,CAAEC,QAAQ,CAAC,QAAnEU,GAAG,eACTJ,YAAY,CAAC,KAAK,CAAC,CACnBC,QAAQ,CAAC,CAAEI,IAAI,CAAE,OAAO,CAAEC,OAAO,CAAEF,GAAG,CAACG,IAAK,CAAC,CAAC,CAE1D;AAEQ,GAAI,CAACZ,WAAW,CAAE,CACdK,YAAY,CAAC,KAAK,CAAC,CACnBF,QAAQ,CAAC,IAAI,CAAC,CACd,CAAC,iFAID,GAAI,CAACH,WAAW,CAAE,CAClBa,OAAO,CAACC,GAAG,CAAC,YAAIC,OAAO,CAAC,CACxBZ,QAAQ,CAAC,YAAIY,OAAO,CAAC,CACrBV,YAAY,CAAC,KAAK,CAAC,CACnB,CAAC,qEACR,kBAxBKE,MAAK,gDAwBV,CACDb,SAAS,CAAC,UAAM,CACZ,MAAM,kBAAMO,eAAc,CAAC,IAAI,CAAC,GACpC,CAAC,CAAE,EAAE,CAAC,CAGN,MAAO,CAAEM,KAAK,CAALA,KAAK,CAAEL,KAAK,CAALA,KAAK,CAAEE,SAAS,CAATA,SAAU,CAAC,CACtC,CAAC"},"metadata":{},"sourceType":"module"}