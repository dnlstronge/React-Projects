{"ast":null,"code":"import _regeneratorRuntime from\"/home/dnlstronge/ReactP/moneyMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/dnlstronge/ReactP/moneyMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/dnlstronge/ReactP/moneyMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import{projectAuth}from\"../firebase/config\";import{useAuthContext}from\"./useAuthContext\";export var useSignup=function useSignup(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCancelled=_useState2[0],setIsCancelled=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPending=_useState6[0],setIsPending=_useState6[1];var _useAuthContext=useAuthContext(),dispatch=_useAuthContext.dispatch;var signup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password,displayName){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setError(null);setIsPending(true);_context.prev=2;_context.next=5;return projectAuth.createUserWithEmailAndPassword(email,password);case 5:res=_context.sent;if(res){_context.next=8;break;}throw new Error('Could not complete signup');case 8:_context.next=10;return res.user.updateProfile({displayName:displayName});case 10://dispatch login action:\ndispatch({type:'LOGIN',payload:res.user});if(!isCancelled){setIsPending(false);setError(null);}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);if(!isCancelled){console.log(_context.t0.message);setError(_context.t0.message);setIsPending(false);}case 17:case\"end\":return _context.stop();}}},_callee,null,[[2,14]]);}));return function signup(_x,_x2,_x3){return _ref.apply(this,arguments);};}();useEffect(function(){return function(){setIsCancelled(true);};},[]);return{error:error,isPending:isPending,signup:signup};};","map":{"version":3,"names":["useState","useEffect","projectAuth","useAuthContext","useSignup","isCancelled","setIsCancelled","error","setError","isPending","setIsPending","dispatch","signup","email","password","displayName","createUserWithEmailAndPassword","res","Error","user","updateProfile","type","payload","console","log","message"],"sources":["/home/dnlstronge/ReactP/moneyMan/src/hooks/useSignup.js"],"sourcesContent":["import { useState, useEffect } from \"react\"\nimport { projectAuth } from \"../firebase/config\"\nimport { useAuthContext } from \"./useAuthContext\"\n\n\nexport const useSignup = () => {\n    const [isCancelled, setIsCancelled] = useState(false)\n    const [error, setError] = useState(null)\n    const [isPending, setIsPending] = useState(false)\n    const { dispatch } = useAuthContext()\n\n    const signup = async (email, password, displayName) => {\n        setError(null)\n        setIsPending(true)\n\n      try {\n        // sign up user:\n        const res = await projectAuth.createUserWithEmailAndPassword(email, password)\n        \n        if(!res) {\n            throw new Error('Could not complete signup')\n        }\n        \n        // add display name:\n\n        await res.user.updateProfile({ displayName })\n\n        //dispatch login action:\n\n        dispatch({type: 'LOGIN', payload: res.user})\n        if (!isCancelled) {\n        setIsPending(false)\n        setError(null)}\n      }  \n      catch(err) {\n        if(!isCancelled) {\n        console.log(err.message)\n        setError(err.message)\n        setIsPending(false)\n        }\n      }\n    }\n    useEffect(() => {\n      return() => {\n          setIsCancelled(true)\n      }\n  }, [])\nreturn {error, isPending, signup}\n}"],"mappings":"kcAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,WAAW,KAAQ,oBAAoB,CAChD,OAASC,cAAc,KAAQ,kBAAkB,CAGjD,MAAO,IAAMC,UAAS,CAAG,QAAZA,UAAS,EAAS,CAC3B,cAAsCJ,QAAQ,CAAC,KAAK,CAAC,wCAA9CK,WAAW,eAAEC,cAAc,eAClC,eAA0BN,QAAQ,CAAC,IAAI,CAAC,yCAAjCO,KAAK,eAAEC,QAAQ,eACtB,eAAkCR,QAAQ,CAAC,KAAK,CAAC,yCAA1CS,SAAS,eAAEC,YAAY,eAC9B,oBAAqBP,cAAc,EAAE,CAA7BQ,QAAQ,iBAARA,QAAQ,CAEhB,GAAMC,OAAM,0FAAG,iBAAOC,KAAK,CAAEC,QAAQ,CAAEC,WAAW,0HAC9CP,QAAQ,CAAC,IAAI,CAAC,CACdE,YAAY,CAAC,IAAI,CAAC,uCAIAR,YAAW,CAACc,8BAA8B,CAACH,KAAK,CAAEC,QAAQ,CAAC,QAAvEG,GAAG,kBAELA,GAAG,8BACG,IAAIC,MAAK,CAAC,2BAA2B,CAAC,+BAK1CD,IAAG,CAACE,IAAI,CAACC,aAAa,CAAC,CAAEL,WAAW,CAAXA,WAAY,CAAC,CAAC,SAE7C;AAEAJ,QAAQ,CAAC,CAACU,IAAI,CAAE,OAAO,CAAEC,OAAO,CAAEL,GAAG,CAACE,IAAI,CAAC,CAAC,CAC5C,GAAI,CAACd,WAAW,CAAE,CAClBK,YAAY,CAAC,KAAK,CAAC,CACnBF,QAAQ,CAAC,IAAI,CAAC,EAAC,iFAGf,GAAG,CAACH,WAAW,CAAE,CACjBkB,OAAO,CAACC,GAAG,CAAC,YAAIC,OAAO,CAAC,CACxBjB,QAAQ,CAAC,YAAIiB,OAAO,CAAC,CACrBf,YAAY,CAAC,KAAK,CAAC,CACnB,CAAC,qEAEJ,kBA9BKE,OAAM,oDA8BX,CACDX,SAAS,CAAC,UAAM,CACd,MAAM,WAAM,CACRK,cAAc,CAAC,IAAI,CAAC,CACxB,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CACR,MAAO,CAACC,KAAK,CAALA,KAAK,CAAEE,SAAS,CAATA,SAAS,CAAEG,MAAM,CAANA,MAAM,CAAC,CACjC,CAAC"},"metadata":{},"sourceType":"module"}