{"ast":null,"code":"import _slicedToArray from\"/home/dnlstronge/ReactP/moneyMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/home/dnlstronge/ReactP/moneyMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{createContext,useEffect,useReducer}from\"react\";import{projectAuth}from'../firebase/config';import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthContext=/*#__PURE__*/createContext();//dispatch function:\nexport var authReducer=function authReducer(state,action){switch(action.type){case'LOGIN':return _objectSpread(_objectSpread({},state),{},{user:action.payload});case'LOGOUT':return _objectSpread(_objectSpread({},state),{},{user:null});case'AUTH_IS_READY':return _objectSpread(_objectSpread({},state),{},{user:action.payload,authIsReady:true});default:return state;}};export var AuthContextProvider=function AuthContextProvider(_ref){var children=_ref.children;var _useReducer=useReducer(authReducer,{user:null,authIsReady:false}),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];console.log('AuthContext state:',state);useEffect(function(){var unsub=projectAuth.onAuthStateChanged(function(user){dispatch({type:'AUTH_IS_READY',payload:user});unsub();});},[]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:_objectSpread(_objectSpread({},state),{},{dispatch:dispatch}),children:children});};","map":{"version":3,"names":["createContext","useEffect","useReducer","projectAuth","AuthContext","authReducer","state","action","type","user","payload","authIsReady","AuthContextProvider","children","dispatch","console","log","unsub","onAuthStateChanged"],"sources":["/home/dnlstronge/ReactP/moneyMan/src/context/AuthContext.js"],"sourcesContent":["import { createContext, useEffect, useReducer } from \"react\";\nimport { projectAuth } from '../firebase/config'\n\nexport const AuthContext = createContext()\n\n\n//dispatch function:\n\nexport const authReducer = (state, action) => {\n   switch (action.type) {\n    case 'LOGIN':\n        return {...state, user: action.payload}\n    case 'LOGOUT':\n        return { ...state, user: null }\n    case 'AUTH_IS_READY':\n        return {...state, user: action.payload, authIsReady: true}\n    default: \n    return state\n   }\n}\n\nexport const AuthContextProvider = ({ children }) => {\n    const [state, dispatch] = useReducer(authReducer, {\n            user: null,\n            authIsReady: false\n        })\n        console.log('AuthContext state:', state)\n    \n    useEffect(() => { \n       const unsub = projectAuth.onAuthStateChanged((user) => {\n            dispatch({ type: 'AUTH_IS_READY', payload: user})\n            unsub()\n        } )\n    }, [])\n\n    return (\n        <AuthContext.Provider value={{...state, dispatch}}>\n            { children }\n        </AuthContext.Provider>\n    )\n}"],"mappings":"6SAAA,OAASA,aAAa,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CAC5D,OAASC,WAAW,KAAQ,oBAAoB,4CAEhD,MAAO,IAAMC,YAAW,cAAGJ,aAAa,EAAE,CAG1C;AAEA,MAAO,IAAMK,YAAW,CAAG,QAAdA,YAAW,CAAIC,KAAK,CAAEC,MAAM,CAAK,CAC3C,OAAQA,MAAM,CAACC,IAAI,EAClB,IAAK,OAAO,CACR,sCAAWF,KAAK,MAAEG,IAAI,CAAEF,MAAM,CAACG,OAAO,GAC1C,IAAK,QAAQ,CACT,sCAAYJ,KAAK,MAAEG,IAAI,CAAE,IAAI,GACjC,IAAK,eAAe,CAChB,sCAAWH,KAAK,MAAEG,IAAI,CAAEF,MAAM,CAACG,OAAO,CAAEC,WAAW,CAAE,IAAI,GAC7D,QACA,MAAOL,MAAK,EAEhB,CAAC,CAED,MAAO,IAAMM,oBAAmB,CAAG,QAAtBA,oBAAmB,MAAqB,IAAfC,SAAQ,MAARA,QAAQ,CAC1C,gBAA0BX,UAAU,CAACG,WAAW,CAAE,CAC1CI,IAAI,CAAE,IAAI,CACVE,WAAW,CAAE,KACjB,CAAC,CAAC,4CAHCL,KAAK,iBAAEQ,QAAQ,iBAIlBC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEV,KAAK,CAAC,CAE5CL,SAAS,CAAC,UAAM,CACb,GAAMgB,MAAK,CAAGd,WAAW,CAACe,kBAAkB,CAAC,SAACT,IAAI,CAAK,CAClDK,QAAQ,CAAC,CAAEN,IAAI,CAAE,eAAe,CAAEE,OAAO,CAAED,IAAI,CAAC,CAAC,CACjDQ,KAAK,EAAE,CACX,CAAC,CAAE,CACP,CAAC,CAAE,EAAE,CAAC,CAEN,mBACI,KAAC,WAAW,CAAC,QAAQ,EAAC,KAAK,gCAAMX,KAAK,MAAEQ,QAAQ,CAARA,QAAQ,EAAE,UAC5CD,QAAQ,EACS,CAE/B,CAAC"},"metadata":{},"sourceType":"module"}