{"version":3,"sources":["pages/home/Home.module.css","components/Navbar.module.css","pages/login/Login.module.css","pages/signup/Signup.module.css","firebase/config.js","context/AuthContext.js","hooks/useAuthContext.js","hooks/useFirestore.js","pages/home/TransactionList.js","pages/home/TransactionForm.js","pages/home/Home.js","hooks/useCollection.js","hooks/useLogin.js","pages/login/Login.js","hooks/useSignup.js","pages/signup/Signup.js","hooks/useLogout.js","components/Navbar.js","App.js","index.js"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","projectFirestore","firestore","projectAuth","auth","timestamp","Timestamp","AuthContext","createContext","authReducer","state","action","type","user","payload","authIsReady","AuthContextProvider","children","useReducer","dispatch","console","log","useEffect","unsub","onAuthStateChanged","Provider","value","useAuthContext","context","useContext","Error","initialState","document","isPending","error","success","firestoreReducer","useFirestore","collection","response","useState","isCancelled","setIsCancelled","ref","dispatchIfNotCancelled","addDocument","doc","createdAt","fromDate","Date","add","addedDocument","message","deleteDocument","id","delete","TransactionList","transactions","className","styles","map","transaction","name","amount","onClick","TransactionForm","uid","setName","setAmount","onSubmit","e","preventDefault","required","onChange","target","Home","_query","_orderBy","documents","setDocuments","setError","query","useRef","current","orderBy","where","unsubscribe","onSnapshot","snapshot","results","docs","forEach","push","data","useCollection","container","content","sidebar","Login","email","setEmail","password","setPassword","setIsPending","login","signInWithEmailAndPassword","res","useLogin","disabled","Signup","displayName","setDisplayName","signup","createUserWithEmailAndPassword","updateProfile","useSignup","Navbar","logout","a","signOut","useLogout","navbar","title","to","App","exact","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ec9b02e8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Home_container__3bftD\",\"content\":\"Home_content__18qU0\",\"sidebar\":\"Home_sidebar__21xz5\",\"transactions\":\"Home_transactions__3_tqr\",\"name\":\"Home_name__4a_Tj\",\"amount\":\"Home_amount__1MW_9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"Navbar_navbar__31-FB\",\"title\":\"Navbar_title__2CGsW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login-form\":\"Login_login-form__1NBYb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"signup-form\":\"Signup_signup-form__3B7tC\"};","import firebase  from \"firebase/app\"\nimport 'firebase/firestore'\nimport 'firebase/auth'\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBR-cCBZg6MCgXyg1o2tTdTgBgAUIsIpQk\",\n    authDomain: \"moneyman-99322.firebaseapp.com\",\n    projectId: \"moneyman-99322\",\n    storageBucket: \"moneyman-99322.appspot.com\",\n    messagingSenderId: \"88932004255\",\n    appId: \"1:88932004255:web:ebb8988b8761c610aecdaa\"\n  };\n\n  // initialise FB\n\n  firebase.initializeApp(firebaseConfig)\n\n  // initialize services\n\n  const projectFirestore = firebase.firestore()\n  const projectAuth = firebase.auth()\n\n  //timestamp\n\n  const timestamp = firebase.firestore.Timestamp\n\n  export { projectFirestore, projectAuth, timestamp }","import { createContext, useEffect, useReducer } from \"react\";\nimport { projectAuth } from '../firebase/config'\n\nexport const AuthContext = createContext()\n\n\n//dispatch function:\n\nexport const authReducer = (state, action) => {\n   switch (action.type) {\n    case 'LOGIN':\n        return {...state, user: action.payload}\n    case 'LOGOUT':\n        return { ...state, user: null }\n    case 'AUTH_IS_READY':\n        return {...state, user: action.payload, authIsReady: true}\n    default: \n    return state\n   }\n}\n\nexport const AuthContextProvider = ({ children }) => {\n    const [state, dispatch] = useReducer(authReducer, {\n            user: null,\n            authIsReady: false\n        })\n        console.log('AuthContext state:', state)\n    \n    useEffect(() => { \n       const unsub = projectAuth.onAuthStateChanged((user) => {\n            dispatch({ type: 'AUTH_IS_READY', payload: user})\n            unsub()\n        } )\n    }, [])\n\n    return (\n        <AuthContext.Provider value={{...state, dispatch}}>\n            { children }\n        </AuthContext.Provider>\n    )\n}","import { AuthContext } from \"../context/AuthContext\";\nimport { useContext } from \"react\";\n\n\n\nexport const useAuthContext = () => {\n    const context = useContext(AuthContext) // object containing ...state + dispatch\n\n    if(!context) {\n        throw Error('useAuthContext must be inside AuthContext provider')\n    }\n\n    return context\n}","//NEEDS TO:\n\n//add new docs to firestore collection\n//remove docs from firestore collection\n\nimport { useReducer, useEffect, useState,  } from \"react\";\nimport { projectFirestore, timestamp } from '../firebase/config'\n\nlet initialState = {\n    document: null,\n    isPending: false,\n    error: null,\n    success: null\n\n}\n\nconst firestoreReducer = (state, action) => {\n    switch (action.type) {\n\n        //add cases to update state\n        case 'IS_PENDING': \n            return { isPending: true, document: null, success: false, error: null }\n        case 'ADDED_DOC':\n            return { isPending: false, document: action.payload, success: true, error: null }\n        \n        case 'DELETED_DOCUMENT':\n            return { isPending: false, document: null, success: true, error: null}\n        case 'ERROR':\n            return { isPending: false, document: null, success: false, error: action.payload }\n        \n        default: \n        return state\n    }\n\n}\n\nexport const useFirestore = (collection) => {\n\n    const [ response, dispatch ] = useReducer(firestoreReducer, initialState ) // response = state\n    const [ isCancelled, setIsCancelled ] = useState(false) // for cleanup function on unmount\n\n    //ref: collection - to be used for both adding and deleting\n\n    const ref = projectFirestore.collection(collection)\n\n    // to dispatch if isCancelled is false: \n\n    const dispatchIfNotCancelled = (action) => {\n        if(!isCancelled) { \n            dispatch(action)\n        }\n    }\n\n    // add doc:\n    const addDocument = async (doc) => {\n        dispatch({type: 'IS_PENDING'}) // no data = no payload req\n        try {\n            const createdAt = timestamp.fromDate(new Date())\n            const addedDocument = await ref.add({...doc, createdAt})\n            dispatchIfNotCancelled({ type: 'ADDED_DOC', payload: addedDocument })\n        }\n        catch (err) {\n            dispatchIfNotCancelled({ type: 'ERROR', payload: err.message})\n\n        }\n    }\n\n    // delete doc:\n\n    const deleteDocument = async (id) => {\n        dispatch({ type: \"IS_PENDING\"})\n\n        try {\n            await ref.doc(id).delete()\n            dispatchIfNotCancelled({ type: 'DELETED_DOCUMENT' })\n        }\n        catch (err)  {\n            dispatchIfNotCancelled({type: 'ERROR', payload: 'Could not delete'})\n        }\n    }\n\n    // cleanup function\n\n    useEffect(()=> { \n        return () => {\n        setIsCancelled(true)\n    }\n\n    }, []) // only runs on mount due to empty dep array\n\n    return { addDocument, deleteDocument, response }\n}","import { useFirestore } from '../../hooks/useFirestore'\n\n//styles\n\nimport styles from './Home.module.css'\n\nexport default function TransactionList({ transactions }) {\n  const { deleteDocument, response} = useFirestore('transactions')\n    console.log(response)\n\n  return (\n    <ul className={styles.transactions}>\n        {transactions.map(( transaction ) => (\n            <li key={transaction.id}>\n                <p className={styles.name}>{transaction.name}</p>\n                <p className={styles.amount}>£{transaction.amount}</p>\n                <button onClick={() => deleteDocument(transaction.id)}>x</button>\n            </li>\n        ))}\n    </ul>\n  )\n}\n","import { useEffect, useState } from \"react\"\nimport { useFirestore } from '../../hooks/useFirestore'\n\nexport default function TransactionForm({uid}) {\n    const [name, setName] = useState('')\n    const [amount, setAmount] = useState('')\n    const { addDocument, response } = useFirestore('transactions') // firestore will make this\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n        addDocument({\n            uid,\n            name, \n            amount}) \n    }\n\n//  Clears Form on submit\n\nuseEffect( () => {\nif ( response.success ) {\n    setName('')\n    setAmount('')\n}\n}, [response.success])\n\n  return (\n    <>\n    <h3>Add a transaction</h3>\n    <form onSubmit={handleSubmit}> \n    <label>\n        <span>Transaction name:</span>\n        <input \n            type=\"text\"\n            required\n            onChange={(e) => setName(e.target.value)} \n            value={name}\n            />\n    </label>\n    <label>\n    <span>Amount (£):</span>\n        <input \n            type=\"text\"\n            required\n            onChange={(e) => setAmount(e.target.value)} \n            value={amount}\n            />\n    </label>\n    <button>Add transaction</button>\n    </form>\n    </>\n  )\n}\n","// styles\n\nimport styles from './Home.module.css'\n\n// hooks \n\nimport { useAuthContext } from '../../hooks/useAuthContext'\nimport { useCollection } from '../../hooks/useCollection'\n\n//comps\nimport TransactionList from './TransactionList'\nimport TransactionForm  from './TransactionForm'\n\nexport function Home() {\n  const { user } = useAuthContext()\n  const { documents, error } = useCollection(\n    'transactions',\n    ['uid', '==', user.uid],\n    ['createdAt', 'desc' ]\n  )\n\n  return (\n    <div className={styles.container}>\n\n    <div className={styles.content}>\n    {error && <p>{error}</p>}\n    {documents && <TransactionList transactions={documents}/>}\n    \n      </div>\n\n    <div className={styles.sidebar}>\n    <TransactionForm uid={user.uid}/>\n      </div>\n\n    </div>\n  )\n}\n","import { useEffect, useState, useRef } from \"react\"\nimport { projectFirestore } from \"../firebase/config\"\n\n\nexport const useCollection = (collection, _query, _orderBy) => {\n    const [ documents, setDocuments ] = useState(null)\n    const [ error, setError ] = useState(null)\n\n// fixes issue cause by using an array inside dep array (inf loop)\n// \"_query\" is \"different\" and causes inf loop if used directly in dependency array\n\n    const query = useRef(_query).current\n    const orderBy = useRef(_orderBy).current\n\n\n    useEffect(() => {\n        let ref = projectFirestore.collection(collection)\n// add where\n\n        if (query) {\n            ref = ref.where(...query)\n        }\n        if (orderBy) {\n            ref = ref.orderBy(...orderBy)\n        }\n\n        const unsubscribe = ref.onSnapshot( (snapshot) => {\n            let results = []\n            snapshot.docs.forEach( doc => {\n                results.push({...doc.data(), id: doc.id })\n            })\n\n            // updates state\n            setDocuments(results)\n            setError(null)\n        }, (error) => {\n            console.log(error)\n            setError('Could not fetch data')\n        })\n            // cleanup/unsub\n        \n            return () => unsubscribe()\n\n\n    }, [collection, query, orderBy])\n\n    return {documents, error}\n}\n\n// Houston we have Problem: would this not cause infinite cycle of rerender\n// due to an array reference type? i.e JS will see query as different and because\n// there is a diff to something in the dep array useEffect would fire again and again......\n// useRef to get arround this? rename query and wrap using useref, store that in var called query","import { useState, useEffect } from 'react'\nimport { projectAuth } from '../firebase/config'\nimport { useAuthContext } from './useAuthContext'\n\n\nexport const useLogin = (email, password) => {\n    const [isCancelled, setIsCancelled] = useState(false)\n    const [error, setError] = useState(null)\n    const [isPending, setIsPending] = useState(false)\n    const { dispatch } = useAuthContext()\n\n    const login = async(email, password) => {\n        setError(null)   \n        setIsPending(true)\n        \n        // this will sign user in:\n        try {\n            const res = await projectAuth.signInWithEmailAndPassword(email, password)\n            setIsPending(false)\n            dispatch({ type: 'LOGIN', payload: res.user })\n\n// update state:\n\n        if (!isCancelled) {\n            setIsPending(false)\n            setError(null)\n            }\n        }\n    \n        catch(err) {\n            if (!isCancelled) {\n            console.log(err.message)\n            setError(err.message)\n            setIsPending(false)\n            }}\n    }\n    useEffect(() => {\n        return() => setIsCancelled(true)\n    }, [])\n\n\n    return { login, error, isPending } \n}","import { useState } from 'react'\nimport { useLogin } from '../../hooks/useLogin'\n\n//styles\nimport styles from './Login.module.css'\n\n\n\nexport function Login() {\nconst [email, setEmail] = useState('')\nconst [password, setPassword] = useState('')\nconst { login, error, isPending } = useLogin()\n\nconst handleSubmit = (e) => {\ne.preventDefault()\nlogin(email, password)\n\n}\n\n  return (\n  <form onSubmit={handleSubmit} className={styles['login-form']}>\n    <h2>Login</h2>\n    <label>\n    <span>Email:</span>\n      <input \n      type=\"email\"\n      onChange={(e) => setEmail(e.target.value)}\n      value={email}\n      />\n    </label>\n    <label>\n      <span>Password:</span>\n      <input \n      type=\"password\" \n      onChange={(e) => setPassword(e.target.value)}\n      value={password}\n      />\n    </label>\n    {!isPending && <button className=\"btn\">Login</button>}\n    {isPending && <button className='btn' disabled>Loading...</button>}\n    {error && <p>{error}</p>}\n    \n\n  </form>\n  )\n}\n","import { useState, useEffect } from \"react\"\nimport { projectAuth } from \"../firebase/config\"\nimport { useAuthContext } from \"./useAuthContext\"\n\n\nexport const useSignup = () => {\n    const [isCancelled, setIsCancelled] = useState(false)\n    const [error, setError] = useState(null)\n    const [isPending, setIsPending] = useState(false)\n    const { dispatch } = useAuthContext()\n\n    const signup = async (email, password, displayName) => {\n        setError(null)\n        setIsPending(true)\n\n      try {\n        // sign up user:\n        const res = await projectAuth.createUserWithEmailAndPassword(email, password)\n        \n        if(!res) {\n            throw new Error('Could not complete signup')\n        }\n        \n        // add display name:\n\n        await res.user.updateProfile({ displayName })\n\n        //dispatch login action:\n\n        dispatch({type: 'LOGIN', payload: res.user})\n        if (!isCancelled) {\n        setIsPending(false)\n        setError(null)}\n      }  \n      catch(err) {\n        if(!isCancelled) {\n        console.log(err.message)\n        setError(err.message)\n        setIsPending(false)\n        }\n      }\n    }\n    useEffect(() => {\n      return() => {\n          setIsCancelled(true)\n      }\n  }, [])\nreturn {error, isPending, signup}\n}","import { useState } from 'react'\nimport { useSignup } from '../../hooks/useSignup'\n\n\n// styles\nimport styles from './Signup.module.css'\n\n\nexport function Signup() {\nconst [displayName, setDisplayName] = useState('')\nconst [email, setEmail] = useState('')\nconst [password, setPassword] = useState('')\n\n//destructure state from hook: \n\nconst { signup, isPending, error } = useSignup()\n\nconst handleSubmit = (e) => {\n  e.preventDefault()\n  signup(email, password, displayName)\n\n}\n\n  return (\n    <form onSubmit={handleSubmit} className={styles['signup-form']}>\n      <label>\n      <h2>Signup</h2>\n      <br/>\n      <span>Email:</span>\n      <input\n        type=\"email\"\n        onChange={(e) => setEmail(e.target.value)}    \n        value={email}  \n       />\n      </label>\n\n      <label>\n      <span>Password</span>\n      <input \n        type=\"password\"\n        onChange={(e) => setPassword(e.target.value)}\n        value={password}\n      /> \n      </label>\n    \n      <label>\n      <span> Display name: </span>\n        <input \n          type=\"text\"\n          onChange={(e) => setDisplayName(e.target.value)}\n          value={displayName}\n        />\n      </label>\n      {!isPending && <button className='btn'>Submit</button>}\n      {isPending && <button className='btn' disabled>Loading..</button>}\n      {error && <p>{error}</p>}\n    </form>\n  )\n}\n","import { useState, useEffect } from \"react\"\nimport { projectAuth } from '../firebase/config'\nimport { useAuthContext } from \"./useAuthContext\"\n\n\n export const useLogout = () => {\n    const [isCancelled, setIsCancelled] = useState(false)\n    const [error, setError] = useState(null)\n    const [isPending, setIsPending] = useState(false)\n    const { dispatch } = useAuthContext()\n\n    const logout = async() => {\n        setError(null)   \n        setIsPending(true)\n        \n        // this will sign user out:\n        try {\n            await projectAuth.signOut()\n\n            dispatch({type: 'LOGOUT' })\n// update state:\n\n            if (!isCancelled) {\n            setIsPending(false)\n            setError(null)\n            }\n        }\n        //catch error\n        catch(err) {\n            if (!isCancelled) {\n            console.log(err.message)\n            setError(err.message)\n            setIsPending(false)\n            }}\n    }\n    useEffect(() => {\n        return() => {\n            setIsCancelled(true)\n        }\n    }, [])\n\n\n    return { logout, error, isPending } \n}","\n//imports\n\nimport { Link } from 'react-router-dom'\nimport { useAuthContext } from '../hooks/useAuthContext'\nimport { useLogout } from '../hooks/useLogout'\n\n\n//style\n\nimport styles from './Navbar.module.css'\n\n\nexport function Navbar() {\n\n  const { logout } = useLogout()\n  const { user } = useAuthContext()\n \n\n\n\n  return (\n    <nav className={styles.navbar}>\n    <ul>\n        <li className={styles.title}>moneyMan</li>\n\n    {(!user && // hides when logged in\n      <> \n        <li><Link to=\"/login\">Login</Link></li>\n        <li><Link to=\"/signup\">Signup</Link></li>\n\n     </>\n    )}\n\n    {(user && //hides when logged out\n      <>\n        <li>Hello, {user.displayName}</li>\n        <li>\n          <button className=\"btn\" onClick={ logout }>Logout</button>\n        </li>\n      </>\n    )}\n    </ul>\n\n    </nav>\n  )\n}\n","import { BrowserRouter, Switch, Route, Redirect } from 'react-router-dom';\nimport { useAuthContext } from './hooks/useAuthContext'; \n\n\n//pages & comps\n \nimport { Home } from \"./pages/home/Home\"\nimport { Login } from \"./pages/login/Login\"\nimport { Signup } from \"./pages/signup/Signup\"\nimport { Navbar } from './components/Navbar'\n\n// import './App.css'\n\nfunction App() {\n  const { authIsReady, user } = useAuthContext()\n\n\n  return (\n    <div className=\"App\">\n\n    {authIsReady && (\n      <BrowserRouter>\n      <Navbar />\n      <Switch>\n        <Route exact path=\"/\">\n        {!user && <Redirect to=\"/login\"/>}\n        {user && <Home/> }\n        </Route>\n        <Route path=\"/login\">\n        {user && <Redirect to=\"/\" />}\n        {!user && <Login />}\n        </Route>\n        <Route path=\"/signup\">\n        {user && <Redirect to=\"/\"/>}\n        {!user && <Signup />}\n        </Route>\n       </Switch>\n      </BrowserRouter>\n    )}\n    </div>\n  );\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { AuthContextProvider } from './context/AuthContext'\n\nReactDOM.render(\n  <React.StrictMode>\n  <AuthContextProvider>\n    <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}